
[common]
# eventually shift over to calling them SSI codes, to distinguish
# from viral barcodes. 
# ssifile = ~/git/mapseq-processing/etc/ssi_v2.txt
ssifile = ~/git/mapseq-processing/etc/barcode_v2.txt



[fastq]
r1start = 0
r1end = 32
r2start = 0
r2end = 20
max_mismatch = 0
# reporting intervals for verbose output, defines how often to print. 
seqhandled_interval = 1000000
matched_interval = 10000
unmatched_interval = 10000


[bowtie]
threads = 10
max_mismatch = 3

[bowtie2]
threads = 10

[ssifasta]
tool = bowtie
# tool = bowtie2
start = 0
end = 44
spikend = 32

# 
spikeinregex= CGTCAGTC$
# T or C = YY
realregex = [TC][TC]$
# A or G = RR
loneregex = [AG][AG]$

default_threshold=2

# valid threshold heuristics
#       fraction	threshold value that results in count_threshold_fraction of data points retained.
#		knee		threshold at knee (per package 'kneed')
# 		elbow		threshold at elbow (per package 'kneed')
#threshold_heuristic=fraction
threshold_heuristic=knee
kneed_poly=2
kneed_sensitivity=4
count_threshold_fraction=.90
count_threshold_min = 2


# LABELS determining initial count thresholds. 
# injection					injection site
# target, target-negative   target-negative uses same as target, but expected to be 0
# target-control			water control, known 0
# injection-control			water control, known 0 
#
target_threshold=2
target-negative_threshold=2
target-lone_threshold=2
target-control_threshold=2

injection_threshold=2
injection-control_threshold=2

# to remove suspect sequences. < 1%?
max_homopolymer_run=7



[plots]
#heatmap_cmap=Reds
heatmap_cmap=Blues
#clustermap_logscale=log10
clustermap_scale=log2


[analysis]
min_ssi_count = 2

#  whether to require that target VBCs be present in the injection area to count.
#  Default should be True, unless the dataset doesn't have any injection areas analyzed.
# require_injection=True
require_injection=False

# minimum unique molecules (UMIs) in injection to be used default: 30
min_injection = 30

# Per-brain, threshold UMI count in target areas to only those 
# more than the largest target-negative total in that brain.  
use_target_negative=False

# Alternatively explicit minimum unique molecules (UMIs) 
# in *any* target area to retain VBC default: 10
min_target = 2


# 
max_lone = .05
min_counts = 2



